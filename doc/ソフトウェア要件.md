## ソフトウェア要件定義

### 1. 概要

本ソフトウェアは、LLM（大規模言語モデル）を利用して、コーディングの補助を行うアプリケーションおよびIDEのプラグインを提供します。ユーザーがコーディング時に様々な支援を受けられることを目的とし、以下の機能を実装します。

### 2. 機能要件

#### 2.1 コーディングアシスタント機能
- **TODO, FIXME の実装補助**
  - TODOおよびFIXMEコメントの箇所を検出し、実装案を提示する。
- **コードの説明**
  - 選択されたソースコードの説明を提供する。
- **コメント追加**
  - ソースコードに対する適切なコメントを自動生成する。
- **テスト作成**
  - ソースコードに対するユニットテストやその他のテストケースを自動生成する。
- **コードの改善**
  - 既存のコードに対する改善案を提示する。
- **コードレビュー**
  - ソースコードのレビューを行い、改善点や潜在的な問題点を指摘する。

#### 2.2 ソースコードの選択
- **アドバイス対象のソースコードを選択可能**
  - ユーザーがアドバイスを受けたいソースコードを選択できるインターフェースを提供する。

#### 2.3 他ファイルの参照機能
- **ファイル参照**
  - ソースコードをEmbeddingし、コサイン類似度で関連するファイルを検索・参照する機能。
  - クラス名・関数名で関連するファイルを自動参照。
  - 明示的に参照ファイルを指定できる。
  - ソースコード以外のファイルも参照可能。
    - Webサイト
    - PDFファイル
    - 画像ファイル

#### 2.4 利用料金の可視化
- **Token数の表示**
  - ChatおよびEmbeddingのToken数を表示。
- **料金換算のテーブル設定**
  - Token数から料金換算を行うためのテーブルを設定できる機能。

### 3. 技術要件

#### 3.1 コア部分
- **Python**
  - コーディング補助のアプリケーションのコア部分はPythonで実装する。
  - Python単独でも利用可能なアプリケーションとする。

#### 3.2 IDE プラグイン
- **ターゲットIDE**
  - IntelliJおよびPyCharm向けのプラグインを提供。
  - プラグインの実装言語はKotlin。
  - KotlinからPythonを呼び出せるようにするため、Python側のコアはCLIに対応する。
  - プラグインからCLIを呼び出すことで機能を提供する。

#### 3.3 LLMの選択
- **対応するLLM**
  - 利用するLLMを選択可能にする。
    - OpenAI
    - Amazon Bedrock Claude3
    - Google Gemini Pro
    - Ollama
- **アンサンブル応答**
  - 複数のLLMを用いてアンサンブルによる高度な応答を提供する。

### 4. 非機能要件

#### 4.1 ユーザビリティ
- **直感的なインターフェース**
  - ユーザーが直感的に操作できるUI/UXを提供する。

#### 4.2 パフォーマンス
- **応答時間**
  - コーディング補助機能の応答時間を最適化し、ユーザーの作業を妨げない。

#### 4.3 保守性
- **LLMの進化に対応**
  - コア部分をPythonで実装することで、LLMの進化に柔軟に対応できる設計とする。

### 5. 補完情報

#### 5.1 インターフェース
- **GUI**
  - ソースコード選択、他ファイル参照、料金表示などの機能を統合したGUIを提供する。

#### 5.2 ドキュメント
- **ユーザーマニュアル**
  - インストール手順、利用方法、FAQなどを含むユーザーマニュアルを提供する。
- **開発者向けドキュメント**
  - コア部分のAPI仕様、プラグインの開発方法などを含む技術ドキュメントを提供する。

これにより、ユーザーが効率的かつ効果的にコーディング補助を受けられるアプリケーションおよびIDEプラグインを実現します。